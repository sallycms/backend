!function(t){"use strict";var e=t("<a />"),a=function(t){return 10>t?"0"+t:t},n=function(t,n,r){var s=t.getDate(),l=t.getDay(),o=t.getMonth(),i=t.getFullYear(),d=t.getUTCHours(),u=t.getUTCMinutes(),y=t.getUTCSeconds(),g={d:s,dd:a(s),ddd:r.shortDays[l],dddd:r.days[l],m:o+1,mm:a(o+1),mmm:r.shortMonths[o],mmmm:r.months[o],yy:String(i).slice(2),yyyy:i,H:d,HH:a(d),M:u,MM:a(u),S:y,SS:a(y)},m=n.replace(/d{1,4}|m{1,4}|yy(?:yy)?|HH?|MM?|SS?|"[^"]*"|'[^']*'/g,function(t){return t in g?g[t]:t});return e.html(m).html()},r=function(t){var e=document.createElement("input");return e.setAttribute("type",t),"text"!==e.type},s={date:"yyyy-mm-dd","datetime-local":"yyyy-mm-ddTHH:MM"},l={date:r("date"),"datetime-local":r("datetime-local")},o=function(t,e){var a=i(t),n=l[a],r=t.prop("required"),s=t.nextAll(".sly-date-disabled"),o=t.nextAll(".sly-date-delete"),d=""===e,u=n&&d;t.toggle(!u),s.toggle(u),o.toggle(!r&&!d)},i=function(e){return t(e).data("sly-orig-type")},d=function(t){return""===t?new Date:new Date(Date.parse(t))},u=function(e){return t(e).nextAll(".sly-date-iso")},y=function(){return t(t("#calroot").data("sly-curelement"))},g=function(t,e){var a=u(t),r=i(t),l=t.data("sly-labels");a.val(""===e?"":n(e,s[r],l)),t.val(""===e?"":n(e,t.data("format"),l))},m=function(){for(var t="",e="abcdefghijklmnopqrstuvwxyz",a=0,n=15;n>a;a++)t+=e.charAt(Math.floor(Math.random()*e.length));return t};t.fn.slyDateTime=function(e){var a=t.extend({},t.fn.slyDateTime.defaults,e),n=t(this).filter('input[type*="date"]'),r={months:a.lngMonths,shortMonths:a.lngShortMonths,days:a.lngDays,shortDays:a.lngShortDays};return t.tools.dateinput.localize("slydatetime",r),n.each(function(){var e=t(this),n=e.attr("type"),s=l[n],c="datetime-local"===e.attr("type"),p=e.data("format"),f=e.prop("required"),h=e.attr("name"),v=t('<a href="#" class="sly-date-delete"></a>').attr("title",a.lngDeleteDate),D=""===e.val()?"":d(e.val()),M=t('<input type="hidden" value="" class="sly-date-iso" />'),S=t('<span class="sly-date-disabled sly-form-read"><span>('+a.lngNoDateSelected+")</span></span>"),b=m();if(!(f&&s||(s?(e.after(S).after(v),e.data("sly-orig-type",n)):(e.attr("name",a.nameFrmt.replace("%s",h)),M.attr("name",h),e.after(M),f||(S.attr("title",a.lngClickToInputDate),e.after(S).after(v)),e.addClass(b),e.dateinput({format:p,selectors:!1,lang:"slydatetime",offset:[5,0],yearRange:[-100,100],firstDay:1}),e=t("."+b),e.removeClass(b),e.data("sly-labels",r),e.data("sly-orig-type",n),g(e,D)),o(e,D),S.click(function(){o(e,"dummy")}),v.click(function(){return o(e,""),g(e,""),!1}),s||(e.on("change",function(){var t=e.data("dateinput").getValue();g(e,t),o(e,t)}),e.on("keydown",function(t){(8===t.keyCode||46===t.keyCode)&&(g(e,""),o(e,""))}),e.on("onBeforeShow",function(e){var a="date"!==i(e.target);t(".sly-date-sliders").toggle(a),t("#calweeks").toggleClass("sly-has-time",a)}),!c)))){e.on("onBeforeShow",function(e){var a=e.target,n=t("#calroot"),r=t(".sly-date-range:first",n).data("rangeinput"),s=t(".sly-date-range:last",n).data("rangeinput"),l=u(a).val();n.data("sly-curelement",a),""===l?(r.setValue(0),s.setValue(0)):(l=d(l),r.setValue(l.getUTCHours()),s.setValue(l.getUTCMinutes()))}),e.on("beforeChange",function(t,a){var n=u(y()).val();return""!==n&&(n=d(n),a.setHours(n.getHours()),a.setMinutes(n.getMinutes()),a.setSeconds(n.getSeconds())),g(e,a),o(e,a),e.data("dateinput").hide().show(),!1});var C=t("#calbody");if(!C.is(".sly-has-time")){C.addClass("sly-has-time");var k=t('<div class="sly-date-sliders"></div>');k.append(t('<input type="range" min="0" max="23" step="1" data-type="hours" />').attr("name",h+"__slyhours")).append(t('<input type="range" min="0" max="59" step="1" data-type="minutes" />').attr("name",h+"__slyminutes")),C.append(k),t(":range",C).rangeinput({css:{slider:"sly-date-slider",input:"sly-date-range sly-form-text",handle:"sly-jqt-handle"}}),t(".sly-date-range:first",C).prop("readonly",!0).after("h"),t(".sly-date-range:last",C).prop("readonly",!0).after("m"),t(".sly-date-range",C).change(function(){var e=t("#calroot"),a=y(),n=parseInt(t(".sly-date-range:first",e).val(),10),r=parseInt(t(".sly-date-range:last",e).val(),10),s=d(u(a).val());s.setUTCHours(n),s.setUTCMinutes(r),g(a,s),o(a,s)})}}})},t.fn.slyDateTime.defaults={lngNoDateSelected:"kein Datum angegeben",lngDeleteDate:"löschen",lngClickToInputDate:"hier klicken, um ein Datum anzugeben",nameFrmt:"input_%s",lngMonths:"Januar,Februar,März,April,Mai,Juni,Juli,August,September,Oktober,November,Dezember",lngShortMonths:"Jan,Feb,Mär,Apr,Mai,Jun,Jul,Aug,Sep,Okt,Nov,Dez",lngDays:"Sonntag,Montag,Dienstag,Mittwoch,Donnerstag,Freitag,Samstag",lngShortDays:"So,Mo,Di,Mi,Do,Fr,Sa"}}(jQuery);