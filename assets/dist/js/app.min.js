/*! sallycms-edge app | version 1.0.0 | 15-12-2014 */
var sly=sly||{};!function(a,b,c,d){var e=[],f="sly-csrf-token";b.Popup=function(b,d,f,g,h,i,j){if(b+=(new Date).getTime(),"./"===d.substr(0,2)){var k=a("base").attr("href");k&&(d=k+("/"===k.substr(k.length-1)?"":"/")+d.substr(2))}this.name=b,this.url=d,this.obj=c.open(d,b,"width="+h+",height="+i+j),e[b]=this,this.close=function(){this.obj.close()},this.setGlobal=function(a,b){this.obj[a]=b}},b.closeAllPopups=function(){a.magnificPopup.close()},b.openCenteredPopup=function(a,c,e,f,g){0===e&&(e=550),0===f&&(f=400),g===d&&(g=",scrollbars=yes,toolbar=no,status=yes,resizable=yes");var h=parseInt((screen.width-e)/2,10),i=parseInt((screen.height-f)/2,10)-24;return new b.Popup(a,c,h,i,e,f,g)},b.openMediapool=function(c,d,e,f,g){var h="mediapool",i={args:{}};NProgress.start(),d?(h+="_detail",i.file_name=d):c&&("detail"!==c||d)&&(h+="_"+c),e&&(i.callback=e),a.isArray(f)&&f.length>0&&(i.args.types=f.join("|")),a.isArray(g)&&g.length>0&&(i.args.categories=g.join("|")),a.magnificPopup.open({type:"iframe",preloader:!1,showCloseBtn:!1,items:{src:b.getUrl(h,null,i)}})},b.openLinkmap=function(c,d,e,f){var g="linkmap",h={args:{}};NProgress.start(),c&&(h.category_id=c),d&&(h.callback=d),a.isArray(e)&&e.length>0&&(h.args.types=e.join("|")),a.isArray(f)&&f.length>0&&(h.args.categories=f.join("|")),a.magnificPopup.open({type:"iframe",preloader:!1,showCloseBtn:!1,items:{src:b.getUrl(g,null,h)}})},b.inherit=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c};var g=function(a){return a+(new Date).getTime()},h=function(a,b){for(var c=((a.data(b)||"")+"").split("|"),d=c.length,e=0,f=[];d>e;++e)c[e].length>0&&f.push(c[e]);return f};b.AbstractWidget=function(b){this.element=a(b),this.valueInput=this.element.find("input.value"),this.nameInput=this.element.find("input.name");var c=this.element.find(".sly-icons");c.delegate("a.fct-open","click",a.proxy(this.onOpen,this)),c.delegate("a.fct-add","click",a.proxy(this.onAdd,this)),c.delegate("a.fct-delete","click",a.proxy(this.onDelete,this))},b.AbstractWidget.prototype={getValue:function(){return this.valueInput.val()},setValue:function(a,b){return this.valueInput.val(a),this.nameInput.val(b),this.valueInput.change(),!0},clear:function(){this.setValue("","")},onOpen:function(){return!1},onAdd:function(){return!1},onDelete:function(){return this.clear(),!1}},b.MediaWidget=function(a){b.AbstractWidget.call(this,a),this.filetypes=h(this.element,"filetypes"),this.categories=h(this.element,"categories")},b.inherit(b.MediaWidget,b.AbstractWidget),b.MediaWidget.prototype.onOpen=function(){var d=g("slymediawidget");return b.openMediapool("detail",this.getValue(),d,this.filetypes,this.categories),c[d]=a.proxy(this.setValue,this),!1},b.MediaWidget.prototype.onAdd=function(){var d=g("slymediawidget");return b.openMediapool("upload","",d,this.filetypes,this.categories),c[d]=a.proxy(this.setValue,this),!1},b.LinkWidget=function(a){b.AbstractWidget.call(this,a),this.articletypes=h(this.element,"articletypes"),this.categories=h(this.element,"categories")},b.inherit(b.LinkWidget,b.AbstractWidget),b.LinkWidget.prototype.onOpen=function(){var d=this.element.data("catid"),e=g("slylinkwidget");return b.openLinkmap(d,e,this.articletypes,this.categories),c[e]=a.proxy(this.setValue,this),!1},b.AbstractListWidget=function(b){this.element=a(b),this.input=this.element.find("input[type=hidden]"),this.list=this.element.find("select"),this.min=this.element.data("min")||0,this.max=this.element.data("max")||-1;var c=this.element.find(".sly-icons.move");c.delegate("a","click",a.proxy(this.onMove,this)),c=this.element.find(".sly-icons.edit"),c.delegate("a.fct-open","click",a.proxy(this.onOpen,this)),c.delegate("a.fct-add","click",a.proxy(this.onAdd,this)),c.delegate("a.fct-delete","click",a.proxy(this.onDelete,this))},b.AbstractListWidget.prototype={getElements:function(){for(var a=this.list.find("option"),b=[],c=0,d=a.length;d>c;++c)b.push(a[c].value);return b},getCount:function(){return this.list.find("option").length},getSelected:function(){var a=this.list.find("option:selected");return a.length?a.val():null},clear:function(){this.list.find("option").remove(),this.input.val("").change()},addValue:function(b,c){var d=this.getCount(),e=this.max;if(d===e)return!0;this.list.append(a("<option>").val(b).text(c)),this.createList();var f=d+1===e;return f&&this.element.addClass("at-max"),this.element.toggleClass("at-min",d+1<=this.min),f},onDelete:function(){var a=this.list.find("option:selected");if(0===a.length)return!1;var b=this.getCount()-this.min;if(0===b)return!1;a=a.slice(0,b);var c=a.next();return 0===c.length&&(c=a.prev()),a.remove(),c.prop("selected",!0),this.element.removeClass("at-max").toggleClass("at-min",this.getCount()===this.min),this.createList(),!1},onMove:function(a){var b=a.target.className.replace("fct-",""),c=this.list,d=c.find("option:selected");return 0===d.length?!1:("top"===b?c.prepend(d):"up"===b?d.prev().insertAfter(d):"down"===b?d.next().insertBefore(d):"bottom"===b&&c.append(d),this.createList(),!1)},createList:function(){this.input.val(this.getElements().join(",")).change()},onOpen:function(){return!1},onAdd:function(){return!1}},b.MedialistWidget=function(a){b.AbstractListWidget.call(this,a),this.filetypes=h(this.element,"filetypes"),this.categories=h(this.element,"categories")},b.inherit(b.MedialistWidget,b.AbstractListWidget),b.MedialistWidget.prototype.onOpen=function(){if(this.getCount()===this.max)return!1;var d=g("slymedialistwidget");return b.openMediapool("detail",this.getSelected(),d,this.filetypes,this.categories),c[d]=a.proxy(this.addValue,this),!1},b.MedialistWidget.prototype.onAdd=function(){if(this.getCount()===this.max)return!1;var d=g("slymedialistwidget");return b.openMediapool("upload","",d,this.filetypes,this.categories),c[d]=a.proxy(this.addValue,this),!1},b.LinklistWidget=function(a){b.AbstractListWidget.call(this,a),this.articletypes=h(this.element,"articletypes"),this.categories=h(this.element,"categories")},b.inherit(b.LinklistWidget,b.AbstractListWidget),b.LinklistWidget.prototype.onOpen=function(){if(this.getCount()===this.max)return!1;var d=this.element.data("catid"),e=g("slylinklistwidget");return b.openLinkmap(d,e,this.articletypes,this.categories),c[e]=a.proxy(this.addValue,this),!1},b.disableLogin=function(d){var e=parseInt(d.html(),10)-1;d.html(e+""),e>0?c.setTimeout(b.disableLogin,1e3,d):(a("div.sly-message p span").html(a("#sly_login_form").data("message")),a("#sly_login_form input:not(:hidden)").prop("disabled",!1))},b.startLoginTimer=function(d){var e=a("div.sly-message p span strong");1===e.length&&(a("#sly_login_form input:not(:hidden)").prop("disabled",!0),a("#sly_login_form").data("message",d),c.setTimeout(b.disableLogin,1e3,e))},b.setModernizrCookie=function(){if("undefined"==typeof Modernizr)return!1;var a,b=Modernizr,c=JSON.parse(JSON.stringify(b));c.audio={},c.video={};for(a in b.audio)c.audio[a]=b.audio[a];for(a in b.video)c.video[a]=b.video[a];c._version=d,c._prefixes=d,c._domPrefixes=d,c._cssomPrefixes=d,document.cookie="sly_modernizr="+escape(JSON.stringify(c))},b.initWidgets=function(c){a(".sly-widget:not(.sly-initialized)",c).each(function(){var c=a(this),d=!1;c.is(".sly-link")?(new b.LinkWidget(this),d=!0):c.is(".sly-media")?(new b.MediaWidget(this),d=!0):c.is(".sly-linklist")?(new b.LinklistWidget(this),d=!0):c.is(".sly-medialist")&&(new b.MedialistWidget(this),d=!0),d&&c.addClass("sly-initialized")})},b.assetBaseUri=function(a){return"../assets/addon/"+(a?a+"/":"")},b.getUrl=function(b,c,d,e){var f="./";return c=c||"index",c=c.toLowerCase(),b=b.toLowerCase(),f+=encodeURI(b),c.length>0&&"index"!==c&&(f+="/"+encodeURI(c)),"string"==typeof d?d=d.replace(/^[?&]*(.*?)[?&]*$/,"$1"):"object"==typeof d?(d=a.param(d),"string"==typeof e&&"&"!==e&&(d=d.replace(/&/g,e))):d="",f+="?"+d,f.replace(/[?&]+$/,"")},a(function(){function d(a){function b(a){if(3===a.nodeType&&d.test(a.nodeValue))c.push(a);else for(var e=0,f=a.childNodes.length;f>e;++e)b(a.childNodes[e])}var c=[],d=/\S/;return b(a),c}function e(a){if(0===a)return"0 Byte";var b=1e3,c=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],d=Math.floor(Math.log(a)/Math.log(b));return(a/Math.pow(b,d)).toPrecision(3)+" "+c[d]}if(b.initWidgets(),a(".sly-check-all").on("ifChecked",function(){var b=a(this).data("target");a("input[name='"+b+"']").iCheck("check")}),a(".sly-check-all").on("ifUnchecked",function(){var b=a(this).data("target");a("input[name='"+b+"']").iCheck("uncheck")}),a("a.sly-delete, input.sly-button-delete").click(function(){return confirm("Sicher?")}),a("a.sly-confirm-me").click(function(){return confirm("Sicher?")}),a(".sly-table-extras-filter input[class*=filter_input_]").keyup(function(b){var c=a(this).attr("class"),d=c.match(/filter_input_([a-zA-Z0-9_-]+)/)[1],e=a("#"+d),f=b.keyCode;if(a("input."+c).val(a(this).val()),b.preventDefault(),8===f||46===f||109===f||189===f||f>=65&&90>=f||f>=48&&57>=f){var g=new RegExp(a(this).val(),"i");a("tbody tr",e).each(function(){var b=a(this),c=a("td",b).filter(function(){return g.test(a(this).text())});b.toggle(c.length>0)})}}),a("a.sly-blank").attr("target","_blank"),a("#sly-navi-page-mediapool a").click(function(){return b.openMediapool(),!1}),a(".sly-form .sly-select-checkbox-list a").on("click",function(){var b=a(this).attr("rel"),c=a(this).closest("div").find("input");return c.iCheck("all"===b?"check":"uncheck"),!1}),"undefined"!=typeof Modernizr){var g=Modernizr.inputtypes;for(var h in g)g.hasOwnProperty(h)&&g[h]&&a("input[type="+h+"]").addClass("ua-supported");Modernizr.input.autofocus||a("*[autofocus]").focus()}"undefined"!=typeof a.fn.rangeinput&&(a('input[type="range"]:not(.ua-supported)').rangeinput({css:{input:"sly-range-range",slider:"sly-range-slider",progress:"sly-range-progress",handle:"sly-jqt-handle"}}),a('input[type*="date"]').slyDateTime({lngNoDateSelected:b.locale.noDateSelected,lngDeleteDate:b.locale.deleteDate,lngClickToInputDate:b.locale.clickToInputDate,lngMonths:b.locale.months.join(","),lngShortMonths:b.locale.shortMonths.join(","),lngDays:b.locale.days.join(","),lngShortDays:b.locale.shortDays.join(",")}));var i=function(b){if("undefined"!=typeof a.fn.select2){for(var c,d,e=a("select:not(.sly-no-select2):not(.sly-no-chosen) option",b),f=e.length,g=0;f>g;++g)d=a(e[g]),c=d.html().match(/^(&nbsp;)*/)[0].length/6,c>0&&d.addClass("sly-lvl-"+c).html(d.html().substr(6*c));a(".sly-form-select:not(.sly-no-select2):not(.sly-no-chosen)",b).each(function(){var b=a(this);void 0===b.data("placeholder")&&b.data("placeholder","Bitte auswählen"),b.select2({})})}};i(a("body")),a("body").bind("rowAdded",function(a){i(a.currentTarget)}),a("body").delegate("a.sly-postlink","click",function(){var b,c,d,e,g=a(this).attr("href").split("?"),h=g[0],i=g[1]||"",j=a("<form>").attr("action",h).attr("method","post"),k=a('meta[name="'+f+'"]');a("body").append(j),i.indexOf("#")>=0&&(i=i.split("#")[0]),i=i.split("&");for(b in i)c=i[b].split("="),d=c[0],e=c[1],a("<input>").attr("type","hidden").attr("name",d).attr("value",e).appendTo(j);return k.length>0&&!a(this).is(".sly-no-csrf")&&a("<input>").attr("type","hidden").attr("name",f).attr("value",k.attr("content")).appendTo(j),a(j).submit(),!1}),a(".sly-form-row.sly-form-multilingual").each(function(){var b=a(this),c=b.is(":visible"),d=b.attr("rel"),e=c?' checked="checked"':"",f='<span class="sly-form-i18n-switch"><input type="checkbox" name="equal__'+d+'" id="equal__'+d+'" value="1"'+e+" /></span>";if(c)a("label:first",this).after(f);else{var g=b.next("div.sly-form-i18n-container");a("label:first",g).after(f)}}),a(".sly-module-select").change(function(){a(this).val()&&a(this).closest("form").submit()});var j=a(".sly-navi-slots li:not(:first-child) a");if(j.length>5){for(var k=a('<select name="sly-slot" id="sly-slot" class="sly-form-select"></select>'),l=0;l<j.length;++l){var m=a(j[l]),n=m.is(".sly-active"),o=m.data("slyslot"),p=m.text(),q=a("<option></option>").text(p).val(o);n&&q.prop("selected",!0),k.append(q)}k.change(function(){var c=k.val(),d=a(".sly-content-header"),e=d.data("slyid"),f=d.data("slyclang"),g=d.data("slyrevision");return window.location=b.getUrl("content",null,{article_id:e,clang:f,revision:g,slot:c},"&"),!1}),j.parent().remove(),a(".sly-navi-slots").append(a("<li>").append(k)),i(k.parent())}a("#sly-system-toggle-cache").click(function(){return a("#sly-form-system-caches p").slideToggle(),!1});var r=null;a("#sly-page-addon .sly-addonlist").delegate("a:not(.sly-blank)","click",function(){var d=a(this),e=a(".sly-addonlist"),g=a(".pkg",e),h=d.closest(".pkg"),i=a('meta[name="'+f+'"]').attr("content"),j=d.attr("href"),k=decodeURI((RegExp("addon/(.+?)(\\?|$)").exec(j)||[,null])[1]),l=a(".error",e),m={addon:h.data("key"),json:1};m[f]=i,l.hide(),r&&c.clearTimeout(r),g.find(".sly-button").addClass("disabled"),NProgress.start();var n=function(b){for(var c in b)if(b.hasOwnProperty(c)){var d=b[c],e=a('.pkg[data-key="'+c+'"]');e.attr("class",d.classes+" pkg"),a(".deps",e).html(d.deps)}},o=function(b){b.finished===!1?p():(n(b.stati),g.find(".sly-button").removeClass("disabled"),NProgress.done(),b.status!==!0&&(h.after(l),a("span",l).html(b.message),l.show(),r=c.setTimeout(function(){l.slideUp()},1e4)))},p=function(){a.ajax({url:b.getUrl("addon",k),data:m,cache:!1,dataType:"json",type:"POST",success:o})};return p(),!1}),a("body.sly-popup").unload(b.closeAllPopups);var s=!!a("body[id^=sly-page-mediapool]").length,t=!!a("body[id^=sly-page-linkmap]").length;window.onload=function(){s&&(window.parent.NProgress.start(),setTimeout(function(){a("body[id^=sly-page-mediapool]").addClass("sly-iframe-ready"),window.parent.NProgress.done()},1e3)),t&&(window.parent.NProgress.start(),setTimeout(function(){a("body[id^=sly-page-linkmap]").addClass("sly-iframe-ready"),window.parent.NProgress.done()},1e3))},a.map(a("label"),function(b){var c=a(b).text().replace(/&nbsp;/g,"");""===a.trim(c)&&a(b).remove(),c.indexOf(":")>-1&&a(b).text(c.substr(0,c.length-1))}),a(".sly-form-checkbox").iCheck({checkboxClass:"sly-icheckbox"}),a(".sly-form-radio").iCheck({radioClass:"sly-iradio"}),a.map(a(".sly-form-text-row, .sly-form-number-row"),function(b){var c=d(b);if(c.length>1){var e=c[1];e.nodeValue="("+a.trim(e.nodeValue)+")",a(e).wrap('<span class="sly-form-annotation"/>')}});var u=a("input[type=file]"),v=a('<span class="sly-button sly-button-file"/>');u.wrap(v).before('<span class="sly-button-file-info">Auswählen &hellip;</span>'),a(document).on("change",".sly-button-file :file",function(){var b=a(this),c=b.get(0).files?b.get(0).files:null,d=b.val().replace(/\\/g,"/").replace(/.*\//,"");b.trigger("fileselect",[c,d])}),a(".sly-button-file :file").on("fileselect",function(b,c,d){a(".sly-button-file-info").text(c?c[0].name+" ("+e(c[0].size)+")":d)}),a(".sly-table").wrap('<div class="table-responsive"/>'),a(".sly-table-extras-pager").contents().filter(function(){var b=/\S/;3===this.nodeType&&b.test(this.nodeValue)&&a(this).remove()})})}(jQuery,sly,window);